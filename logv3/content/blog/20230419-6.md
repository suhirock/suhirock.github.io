+++
title = "PHPのfilter_varは結構強力"
date = 2023-04-19T14:37:20Z
slug = "php-filter_var-is-strong"
+++

filter_varは特定の形でデータをフィルタリングしてくれるもので、その形式を知っていればかなり楽できる関数です。  
というか知られているのかな？なんとなく、ググってみたら、細かいところまでは手が届かないがある程度形式の保証をしてくれるといった印象を僕は持ちました。  
今回この関数を調べたのはWordPressのプラグイン「MW WP Form」内で使われていたからです。  
もともとは「Data not accepted」みたいなエラーをPHPMailerで出したくて、mwform_auto_mail_raw_mw-wp-form-xxxのフィルターで$Mail_raw->from = "hoge"とかしてたわけですが、メールが正常に送信されますではないですか!  
これの原因がfilter_varだったわけでして、プラグインで設定したfromのメールを送信前に検証していました。  
おかしなFromだったら「デフォルトの送信元メールアドレス」を設定しており、正常送信されるようになるということになっておりました。